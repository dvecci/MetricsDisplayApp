define(["require","backbone","Views/ChartView"],function(e){"use strict";var t=e("backbone"),n=e("Views/ChartView"),r=t.View.extend({initialize:function(e){if(!e)throw"User View expects a User Model";this.model=e,this.model.get("avatar")||this.model.set("avatar",this.model.get("avatar"));if(!this.model.get("name"))throw"User View expects a name";if(!this.model.get("occupation"))throw"User View expects an occupation";this.render(),this.listenTo(this.model,"change:impressions",this.updateImpressions),this.listenTo(this.model,"change:conversions",this.updateConversions),this.listenTo(this.model,"change:revenue",this.updateRevenue),this.listenTo(this.model,"change:conversionData",this.renderChart)},template:_.template($("#userTemplate").html()),render:function(){this.setElement(this.template({model:this.model})),this.model.get("conversionData")&&this.renderChart()},updateImpressions:function(){this.$(".impressions").text(this.model.get("impressions"))},updateConversions:function(){this.$(".conversions").text(this.model.get("conversions"))},updateRevenue:function(){this.$(".revenue").text("$"+Math.floor(this.model.get("revenue")))},renderChart:function(){var e=new n(this.model.get("conversionData"));this.$(".chartContainer").append(e.$el),e.updateChart()}});return r});